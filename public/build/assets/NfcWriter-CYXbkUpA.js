import{a as W,r as n,m as C,c as d,f as e,b as c,w as R,d as m,p as A,o as p,h as g,t as b,n as f}from"./app-CG-JD9Ss.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"nfc-writer"},L={class:"writer-content"},E={class:"user-selection"},V={class:"field"},x={key:0,class:"url-preview"},D={class:"url-display"},S={class:"write-section"},G={key:0,class:"nfc-not-supported"},T={__name:"NfcWriter",setup($){const l=W(),k=n([]),i=n(null),o=n(""),v=n(!1),r=n(!1),u=n(!1),t=n(null);C(()=>{"NDEFReader"in window?(u.value=!0,console.log("Web NFC API is supported")):(u.value=!1,console.log("Web NFC API is not supported"),l.add({severity:"warn",summary:"Peringatan",detail:"Web NFC API tidak didukung di browser ini. Fitur write NFC tidak akan berfungsi.",life:5e3}))});const w=async()=>{v.value=!0;try{const s=await A.get("/users");k.value=s.data.data||s.data}catch{l.add({severity:"error",summary:"Error",detail:"Gagal mengambil daftar pengguna",life:3e3})}finally{v.value=!1}},N=()=>{i.value?o.value=`${window.location.origin}/users/${i.value}`:o.value=""},F=async()=>{try{await navigator.clipboard.writeText(o.value),l.add({severity:"success",summary:"Berhasil",detail:"URL telah disalin ke clipboard",life:3e3})}catch{l.add({severity:"error",summary:"Error",detail:"Gagal menyalin URL ke clipboard",life:3e3})}},h=async()=>{if(!u.value){l.add({severity:"error",summary:"Error",detail:"Web NFC API tidak didukung di browser ini",life:3e3});return}if(!i.value){l.add({severity:"warn",summary:"Peringatan",detail:"Harap pilih pengguna terlebih dahulu",life:3e3});return}r.value=!0,t.value=null;try{await new NDEFReader().write({records:[{recordType:"url",data:o.value}]}),t.value={type:"success",icon:"pi pi-check-circle",message:"Berhasil menulis URL ke tag NFC"},l.add({severity:"success",summary:"Berhasil",detail:"URL telah berhasil ditulis ke tag NFC",life:3e3})}catch(s){t.value={type:"error",icon:"pi pi-times-circle",message:`Gagal menulis ke NFC: ${s.message}`},l.add({severity:"error",summary:"Error",detail:`Gagal menulis ke NFC: ${s.message}`,life:5e3})}finally{r.value=!1}};return C(()=>{w()}),(s,a)=>{const _=m("Dropdown"),y=m("Button"),P=m("Card");return p(),d("div",I,[a[8]||(a[8]=e("div",{class:"page-header"},[e("h1",{class:"page-title"},"Write NFC Tag")],-1)),c(P,null,{content:R(()=>[e("div",L,[a[7]||(a[7]=e("div",{class:"info-section"},[e("h3",null,"Informasi Write NFC"),e("p",null,"Gunakan halaman ini untuk menulis URL ke tag NFC. Pastikan perangkat Anda mendukung Web NFC API.")],-1)),e("div",E,[a[2]||(a[2]=e("h3",null,"Pilih Pengguna",-1)),e("div",V,[a[1]||(a[1]=e("label",{for:"userSelect"},"Pengguna",-1)),c(_,{id:"userSelect",modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=U=>i.value=U),options:k.value,optionLabel:"name",optionValue:"id",placeholder:"Pilih pengguna",loading:v.value,onChange:N},null,8,["modelValue","options","loading"])])]),i.value?(p(),d("div",x,[a[3]||(a[3]=e("h3",null,"URL yang akan ditulis",-1)),e("div",D,[e("p",null,b(o.value),1),c(y,{icon:"pi pi-copy",onClick:F,class:"p-button-outlined",label:"Salin URL"})])])):g("",!0),e("div",S,[a[5]||(a[5]=e("h3",null,"Write ke NFC",-1)),a[6]||(a[6]=e("div",{class:"write-instructions"},[e("p",null,"1. Pastikan NFC pada perangkat Anda aktif"),e("p",null,"2. Dekatkan tag NFC ke perangkat"),e("p",null,'3. Klik tombol "Write ke NFC" di bawah')],-1)),c(y,{label:r.value?"Menulis ke NFC...":"Write ke NFC",icon:r.value?"pi pi-spin pi-spinner":"pi pi-qrcode",onClick:h,disabled:!i.value||r.value||!u.value,class:f({"p-button-success":!r.value})},null,8,["label","icon","disabled","class"]),u.value?g("",!0):(p(),d("div",G,[...a[4]||(a[4]=[e("i",{class:"pi pi-exclamation-triangle"},null,-1),e("span",null,"Web NFC API tidak didukung di browser ini",-1)])]))]),t.value?(p(),d("div",{key:1,class:f(["write-result",t.value.type])},[e("i",{class:f(t.value.icon)},null,2),e("span",null,b(t.value.message),1)],2)):g("",!0)])]),_:1})])}}},z=B(T,[["__scopeId","data-v-0b367d64"]]);export{z as default};
