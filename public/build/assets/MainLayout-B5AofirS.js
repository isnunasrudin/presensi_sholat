import{u as B,a as j,r as g,c as v,f as s,h as p,b as n,d as y,w as e,j as r,k as F,v as L,t as w,T as P,e as R,o as u,l as k,n as D}from"./app-DK0aCQf4.js";import{_ as E}from"./edo-CW448nKc.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"layout"},T={class:"header"},V={class:"header-content"},q={class:"nav desktop-nav"},z={key:0,class:"nav-dropdown"},K={class:"dropdown-menu"},W={class:"user-menu desktop-user-menu"},G={key:0,class:"impersonation-banner"},H={key:0,class:"mobile-menu"},J={class:"mobile-nav"},Q={class:"mobile-user-section"},U={class:"mobile-user-info"},X={class:"main-content"},Y={__name:"MainLayout",setup(Z){const t=B(),$=R(),b=j(),o=g(!1),d=g(!1),S=g(!1),m=g(!1),C=async()=>{o.value=!1;try{await t.logout(),b.add({severity:"success",summary:"Success",detail:"Logged out successfully",life:3e3}),$.push("/login")}catch(f){console.error("Logout error:",f)}},A=async()=>{try{await t.stopImpersonating(),b.add({severity:"success",summary:"Success",detail:"Returned to admin account",life:3e3}),window.location.href="/"}catch{b.add({severity:"error",summary:"Error",detail:"Failed to stop impersonating",life:3e3})}},N=()=>{d.value=!d.value},x=()=>{m.value=!m.value};return document.addEventListener("click",f=>{const l=document.querySelector(".nav-dropdown");l&&!l.contains(f.target)&&(d.value=!1,S.value=!1)}),(f,l)=>{const c=y("Button"),i=y("router-link"),M=y("router-view");return u(),v("div",O,[s("header",T,[s("div",V,[l[25]||(l[25]=s("h1",{class:"logo"},[s("i",{class:"pi pi-check-circle"}),s("span",{class:"logo-text"},"SNESA")],-1)),n(c,{icon:"pi pi-bars",class:"mobile-menu-toggle",onClick:l[0]||(l[0]=a=>o.value=!o.value),text:"",rounded:""}),s("nav",q,[n(i,{to:"/",class:"nav-link"},{default:e(()=>[...l[15]||(l[15]=[s("i",{class:"pi pi-home"},null,-1),s("span",null,"Dasbor",-1)])]),_:1}),n(i,{to:"/prayer-records",class:"nav-link"},{default:e(()=>[...l[16]||(l[16]=[s("i",{class:"pi pi-calendar"},null,-1),s("span",null,"Catatan Sholat",-1)])]),_:1}),r(t).isAdmin?(u(),v("div",z,[s("div",{class:"nav-link dropdown-toggle",onClick:N},[...l[17]||(l[17]=[s("i",{class:"pi pi-cog"},null,-1),s("span",null,"Admin",-1),s("i",{class:"pi pi-chevron-down"},null,-1)])]),F(s("div",K,[n(i,{to:"/users",class:"dropdown-item",onClick:l[1]||(l[1]=a=>d.value=!1)},{default:e(()=>[...l[18]||(l[18]=[s("i",{class:"pi pi-users"},null,-1),s("span",null,"Pengguna",-1)])]),_:1}),n(i,{to:"/rombongan-belajar",class:"dropdown-item",onClick:l[2]||(l[2]=a=>d.value=!1)},{default:e(()=>[...l[19]||(l[19]=[s("i",{class:"pi pi-graduation-cap"},null,-1),s("span",null,"Rombongan Belajar",-1)])]),_:1}),n(i,{to:"/user-recap",class:"dropdown-item",onClick:l[3]||(l[3]=a=>d.value=!1)},{default:e(()=>[...l[20]||(l[20]=[s("i",{class:"pi pi-chart-bar"},null,-1),s("span",null,"Rekap Pengguna",-1)])]),_:1}),l[23]||(l[23]=s("div",{class:"dropdown-divider"},null,-1)),n(i,{to:"/nfc-scanner",class:"dropdown-item",onClick:l[4]||(l[4]=a=>d.value=!1)},{default:e(()=>[...l[21]||(l[21]=[s("i",{class:"pi pi-search"},null,-1),s("span",null,"Scan NFC",-1)])]),_:1}),n(i,{to:"/nfc-writer",class:"dropdown-item",onClick:l[5]||(l[5]=a=>d.value=!1)},{default:e(()=>[...l[22]||(l[22]=[s("i",{class:"pi pi-pencil"},null,-1),s("span",null,"Write NFC",-1)])]),_:1})],512),[[L,d.value]])])):p("",!0)]),s("div",W,[n(i,{to:"/profile",class:"nav-link"},{default:e(()=>[l[24]||(l[24]=s("i",{class:"pi pi-user"},null,-1)),s("span",null,w(r(t).user.name),1)]),_:1}),n(c,{icon:"pi pi-sign-out",label:"Keluar",onClick:C,severity:"danger",text:""})])]),r(t).isImpersonating?(u(),v("div",G,[l[26]||(l[26]=s("i",{class:"pi pi-exclamation-triangle"},null,-1)),s("span",null,"Melihat sebagai "+w(r(t).user?.name),1),n(c,{icon:"pi pi-times",label:"Berhenti",onClick:A,severity:"warning",size:"small"})])):p("",!0),n(P,{name:"slide"},{default:e(()=>[o.value?(u(),v("div",H,[s("nav",J,[n(i,{to:"/",class:"mobile-nav-link",onClick:l[6]||(l[6]=a=>o.value=!1)},{default:e(()=>[...l[27]||(l[27]=[s("i",{class:"pi pi-home"},null,-1),s("span",null,"Dasbor",-1)])]),_:1}),n(i,{to:"/prayer-records",class:"mobile-nav-link",onClick:l[7]||(l[7]=a=>o.value=!1)},{default:e(()=>[...l[28]||(l[28]=[s("i",{class:"pi pi-calendar"},null,-1),s("span",null,"Catatan Sholat",-1)])]),_:1}),r(t).isAdmin?(u(),k(i,{key:0,to:"/users",class:"mobile-nav-link",onClick:l[8]||(l[8]=a=>o.value=!1)},{default:e(()=>[...l[29]||(l[29]=[s("i",{class:"pi pi-users"},null,-1),s("span",null,"Pengguna",-1)])]),_:1})):p("",!0),r(t).isAdmin?(u(),k(i,{key:1,to:"/rombongan-belajar",class:"mobile-nav-link",onClick:l[9]||(l[9]=a=>o.value=!1)},{default:e(()=>[...l[30]||(l[30]=[s("i",{class:"pi pi-graduation-cap"},null,-1),s("span",null,"Rombongan Belajar",-1)])]),_:1})):p("",!0),r(t).isAdmin?(u(),k(i,{key:2,to:"/user-recap",class:"mobile-nav-link",onClick:l[10]||(l[10]=a=>o.value=!1)},{default:e(()=>[...l[31]||(l[31]=[s("i",{class:"pi pi-chart-bar"},null,-1),s("span",null,"Rekap Pengguna",-1)])]),_:1})):p("",!0),n(i,{to:"/profile",class:"mobile-nav-link",onClick:l[11]||(l[11]=a=>o.value=!1)},{default:e(()=>[...l[32]||(l[32]=[s("i",{class:"pi pi-user"},null,-1),s("span",null,"Profil",-1)])]),_:1}),r(t).isAdmin?(u(),v("div",{key:3,class:"mobile-nav-link mobile-dropdown-toggle",onClick:x},[l[33]||(l[33]=s("i",{class:"pi pi-qrcode"},null,-1)),l[34]||(l[34]=s("span",null,"NFC",-1)),s("i",{class:D(m.value?"pi pi-chevron-up":"pi pi-chevron-down")},null,2)])):p("",!0),r(t).isAdmin&&m.value?(u(),k(i,{key:4,to:"/nfc-scanner",class:"mobile-nav-link mobile-dropdown-item",onClick:l[12]||(l[12]=a=>o.value=!1)},{default:e(()=>[...l[35]||(l[35]=[s("i",{class:"pi pi-search"},null,-1),s("span",null,"Scan NFC",-1)])]),_:1})):p("",!0),r(t).isAdmin&&m.value?(u(),k(i,{key:5,to:"/nfc-writer",class:"mobile-nav-link mobile-dropdown-item",onClick:l[13]||(l[13]=a=>o.value=!1)},{default:e(()=>[...l[36]||(l[36]=[s("i",{class:"pi pi-pencil"},null,-1),s("span",null,"Write NFC",-1)])]),_:1})):p("",!0)]),s("div",Q,[s("div",U,[l[37]||(l[37]=s("i",{class:"pi pi-user"},null,-1)),s("span",null,w(r(t).user?.name),1)]),n(c,{icon:"pi pi-sign-out",label:"Keluar",onClick:C,severity:"danger",class:"mobile-logout-btn"})])])):p("",!0)]),_:1}),o.value?(u(),v("div",{key:1,class:"mobile-menu-overlay",onClick:l[14]||(l[14]=a=>o.value=!1)})):p("",!0)]),s("main",X,[n(M)]),l[38]||(l[38]=s("div",{class:"flex gap-2 justify-center cursor-pointer !mb-5 !text-white",onclick:"location.href='https:\\/\\/pelajartrenggalek.or.id'"},[s("span",null,"Powered by "),s("img",{src:E,alt:"",class:"h-3 w-3 object-contain"})],-1))])}}},sl=I(Y,[["__scopeId","data-v-f3131ffb"]]);export{sl as default};
