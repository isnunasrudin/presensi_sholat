import{r as c,c as v,e as s,s as p,y as i,j as y,q as n,R as r,l as B,K as j,t as w,z as D,Q as R,d as u,p as m,v as E}from"./vue-Bki0M6Jk.js";import{_ as F}from"./edo-CW448nKc.js";import{u as L}from"./app-Df4oPpsR.js";import{x as P}from"./primevue-BWgMG8pc.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"layout"},q={class:"header"},z={class:"header-content"},K={class:"nav desktop-nav"},V={key:0,class:"nav-dropdown"},T={class:"dropdown-menu"},W={class:"user-menu desktop-user-menu"},Q={key:0,class:"impersonation-banner"},G={key:0,class:"mobile-menu"},H={class:"mobile-nav"},J={class:"mobile-user-section"},U={class:"mobile-user-info"},X={class:"main-content"},Y={__name:"MainLayout",setup(Z){const a=L(),x=R(),b=P(),t=c(!1),d=c(!1),$=c(!1),f=c(!1),C=async()=>{t.value=!1;try{await a.logout(),b.add({severity:"success",summary:"Success",detail:"Logged out successfully",life:3e3}),x.push("/login")}catch(k){console.error("Logout error:",k)}},S=async()=>{try{await a.stopImpersonating(),b.add({severity:"success",summary:"Success",detail:"Returned to admin account",life:3e3}),window.location.href="/"}catch{b.add({severity:"error",summary:"Error",detail:"Failed to stop impersonating",life:3e3})}},A=()=>{d.value=!d.value},N=()=>{f.value=!f.value};return document.addEventListener("click",k=>{const l=document.querySelector(".nav-dropdown");l&&!l.contains(k.target)&&(d.value=!1,$.value=!1)}),(k,l)=>{const g=y("Button"),e=y("router-link"),M=y("router-view");return u(),v("div",O,[s("header",q,[s("div",z,[l[28]||(l[28]=s("h1",{class:"logo"},[s("i",{class:"pi pi-check-circle"}),s("span",{class:"logo-text"},"SNESA")],-1)),i(g,{icon:"pi pi-bars",class:"mobile-menu-toggle",onClick:l[0]||(l[0]=o=>t.value=!t.value),text:"",rounded:""}),s("nav",K,[i(e,{to:"/",class:"nav-link"},{default:n(()=>[...l[17]||(l[17]=[s("i",{class:"pi pi-home"},null,-1),s("span",null,"Dasbor",-1)])]),_:1}),i(e,{to:"/prayer-records",class:"nav-link"},{default:n(()=>[...l[18]||(l[18]=[s("i",{class:"pi pi-calendar"},null,-1),s("span",null,"Sholat Dhuhur & Dhuha",-1)])]),_:1}),r(a).isAdmin?(u(),v("div",V,[s("div",{class:"nav-link dropdown-toggle",onClick:A},[...l[19]||(l[19]=[s("i",{class:"pi pi-cog"},null,-1),s("span",null,"Admin",-1),s("i",{class:"pi pi-chevron-down"},null,-1)])]),B(s("div",T,[i(e,{to:"/users",class:"dropdown-item",onClick:l[1]||(l[1]=o=>d.value=!1)},{default:n(()=>[...l[20]||(l[20]=[s("i",{class:"pi pi-users"},null,-1),s("span",null,"Pengguna",-1)])]),_:1}),i(e,{to:"/rombongan-belajar",class:"dropdown-item",onClick:l[2]||(l[2]=o=>d.value=!1)},{default:n(()=>[...l[21]||(l[21]=[s("i",{class:"pi pi-graduation-cap"},null,-1),s("span",null,"Rombongan Belajar",-1)])]),_:1}),i(e,{to:"/user-recap",class:"dropdown-item",onClick:l[3]||(l[3]=o=>d.value=!1)},{default:n(()=>[...l[22]||(l[22]=[s("i",{class:"pi pi-chart-bar"},null,-1),s("span",null,"Rekap Pengguna",-1)])]),_:1}),i(e,{to:"/excel-export",class:"dropdown-item",onClick:l[4]||(l[4]=o=>d.value=!1)},{default:n(()=>[...l[23]||(l[23]=[s("i",{class:"pi pi-file-excel"},null,-1),s("span",null,"Export Sholat",-1)])]),_:1}),l[26]||(l[26]=s("div",{class:"dropdown-divider"},null,-1)),i(e,{to:"/nfc-scanner",class:"dropdown-item",onClick:l[5]||(l[5]=o=>d.value=!1)},{default:n(()=>[...l[24]||(l[24]=[s("i",{class:"pi pi-search"},null,-1),s("span",null,"Scan NFC",-1)])]),_:1}),i(e,{to:"/nfc-writer",class:"dropdown-item",onClick:l[6]||(l[6]=o=>d.value=!1)},{default:n(()=>[...l[25]||(l[25]=[s("i",{class:"pi pi-pencil"},null,-1),s("span",null,"Write NFC",-1)])]),_:1})],512),[[j,d.value]])])):p("",!0)]),s("div",W,[i(e,{to:"/profile",class:"nav-link"},{default:n(()=>[l[27]||(l[27]=s("i",{class:"pi pi-user"},null,-1)),s("span",null,w(r(a).user.name),1)]),_:1}),i(g,{icon:"pi pi-sign-out",label:"Keluar",onClick:C,severity:"danger",text:""})])]),r(a).isImpersonating?(u(),v("div",Q,[l[29]||(l[29]=s("i",{class:"pi pi-exclamation-triangle"},null,-1)),s("span",null,"Melihat sebagai "+w(r(a).user?.name),1),i(g,{icon:"pi pi-times",label:"Berhenti",onClick:S,severity:"warning",size:"small"})])):p("",!0),i(D,{name:"slide"},{default:n(()=>[t.value?(u(),v("div",G,[s("nav",H,[i(e,{to:"/",class:"mobile-nav-link",onClick:l[7]||(l[7]=o=>t.value=!1)},{default:n(()=>[...l[30]||(l[30]=[s("i",{class:"pi pi-home"},null,-1),s("span",null,"Dasbor",-1)])]),_:1}),i(e,{to:"/prayer-records",class:"mobile-nav-link",onClick:l[8]||(l[8]=o=>t.value=!1)},{default:n(()=>[...l[31]||(l[31]=[s("i",{class:"pi pi-calendar"},null,-1),s("span",null,"Sholat Dhuhur & Dhuha",-1)])]),_:1}),r(a).isAdmin?(u(),m(e,{key:0,to:"/users",class:"mobile-nav-link",onClick:l[9]||(l[9]=o=>t.value=!1)},{default:n(()=>[...l[32]||(l[32]=[s("i",{class:"pi pi-users"},null,-1),s("span",null,"Pengguna",-1)])]),_:1})):p("",!0),r(a).isAdmin?(u(),m(e,{key:1,to:"/rombongan-belajar",class:"mobile-nav-link",onClick:l[10]||(l[10]=o=>t.value=!1)},{default:n(()=>[...l[33]||(l[33]=[s("i",{class:"pi pi-graduation-cap"},null,-1),s("span",null,"Rombongan Belajar",-1)])]),_:1})):p("",!0),r(a).isAdmin?(u(),m(e,{key:2,to:"/user-recap",class:"mobile-nav-link",onClick:l[11]||(l[11]=o=>t.value=!1)},{default:n(()=>[...l[34]||(l[34]=[s("i",{class:"pi pi-chart-bar"},null,-1),s("span",null,"Rekap Pengguna",-1)])]),_:1})):p("",!0),r(a).isAdmin?(u(),m(e,{key:3,to:"/excel-export",class:"mobile-nav-link",onClick:l[12]||(l[12]=o=>t.value=!1)},{default:n(()=>[...l[35]||(l[35]=[s("i",{class:"pi pi-file-excel"},null,-1),s("span",null,"Export Sholat",-1)])]),_:1})):p("",!0),i(e,{to:"/profile",class:"mobile-nav-link",onClick:l[13]||(l[13]=o=>t.value=!1)},{default:n(()=>[...l[36]||(l[36]=[s("i",{class:"pi pi-user"},null,-1),s("span",null,"Profil",-1)])]),_:1}),r(a).isAdmin?(u(),v("div",{key:4,class:"mobile-nav-link mobile-dropdown-toggle",onClick:N},[l[37]||(l[37]=s("i",{class:"pi pi-qrcode"},null,-1)),l[38]||(l[38]=s("span",null,"NFC",-1)),s("i",{class:E(f.value?"pi pi-chevron-up":"pi pi-chevron-down")},null,2)])):p("",!0),r(a).isAdmin&&f.value?(u(),m(e,{key:5,to:"/nfc-scanner",class:"mobile-nav-link mobile-dropdown-item",onClick:l[14]||(l[14]=o=>t.value=!1)},{default:n(()=>[...l[39]||(l[39]=[s("i",{class:"pi pi-search"},null,-1),s("span",null,"Scan NFC",-1)])]),_:1})):p("",!0),r(a).isAdmin&&f.value?(u(),m(e,{key:6,to:"/nfc-writer",class:"mobile-nav-link mobile-dropdown-item",onClick:l[15]||(l[15]=o=>t.value=!1)},{default:n(()=>[...l[40]||(l[40]=[s("i",{class:"pi pi-pencil"},null,-1),s("span",null,"Write NFC",-1)])]),_:1})):p("",!0)]),s("div",J,[s("div",U,[l[41]||(l[41]=s("i",{class:"pi pi-user"},null,-1)),s("span",null,w(r(a).user?.name),1)]),i(g,{icon:"pi pi-sign-out",label:"Keluar",onClick:C,severity:"danger",class:"mobile-logout-btn"})])])):p("",!0)]),_:1}),t.value?(u(),v("div",{key:1,class:"mobile-menu-overlay",onClick:l[16]||(l[16]=o=>t.value=!1)})):p("",!0)]),s("main",X,[i(M)]),l[42]||(l[42]=s("div",{class:"flex gap-2 justify-center cursor-pointer !mb-5 !text-white",onclick:"location.href='https:\\/\\/pelajartrenggalek.or.id'"},[s("span",null,"Powered by "),s("img",{src:F,alt:"",class:"h-3 w-3 object-contain"})],-1))])}}},el=I(Y,[["__scopeId","data-v-03bf827f"]]);export{el as default};
